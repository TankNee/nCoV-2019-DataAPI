(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["dashboard"],{"5ded":function(t,e,s){},7159:function(t,e,s){t.exports=s.p+"static/img/img.146655c9.jpg"},"7ed4":function(t,e,s){"use strict";var a=s("0261"),n=new a["default"];e["a"]=n},"9ede":function(t,e,s){"use strict";var a=s("5ded"),n=s.n(a);n.a},e2ad:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-card",{staticClass:"mgb20",staticStyle:{height:"252px"},attrs:{shadow:"hover"}},[a("div",{staticClass:"user-info"},[a("img",{staticClass:"user-avator",attrs:{src:s("7159"),alt:""}}),a("div",{staticClass:"user-info-cont"},[a("div",{staticClass:"user-info-name"},[t._v(t._s(t.userInfo.userName))]),a("div",[t._v(t._s(t.role))])])]),a("div",{staticClass:"user-info-list"},[t._v("\n                    上次登录时间：\n                    "),a("span",[t._v(t._s(t.userInfo.lastLoginTime))])]),a("div",{staticClass:"user-info-list"},[t._v("\n                    上次登录地点：\n                    "),a("span",[t._v("东莞")])])]),a("el-card",{staticStyle:{height:"252px"},attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("各地感染比例")])]),t._v("\n                "+t._s(t.query.no1.name)+"\n                "),a("el-progress",{attrs:{percentage:t.query.no1.count,color:"#42b983"}}),t._v("\n                "+t._s(t.query.no2.name)+"\n                "),a("el-progress",{attrs:{percentage:t.query.no2.count,color:"#f1e05a"}}),t._v("\n                "+t._s(t.query.no3.name)+"\n                "),a("el-progress",{attrs:{percentage:t.query.no3.count}}),t._v("\n                "+t._s(t.query.no4.name)+"\n                "),a("el-progress",{attrs:{percentage:t.query.no4.count,color:"#f56c6c"}})],1)],1),a("el-col",{attrs:{span:16}},[a("el-row",{staticClass:"mgb20",attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-card",{attrs:{shadow:"hover","body-style":{padding:"0px"}}},[a("div",{staticClass:"grid-content grid-con-1"},[a("i",{staticClass:"el-icon-warning grid-con-icon"}),a("div",{staticClass:"grid-cont-right"},[a("div",{staticClass:"grid-num"},[t._v(t._s(t.sumInfo.confirmedCount))]),a("div",[t._v("确诊人数")])])])])],1),a("el-col",{attrs:{span:8}},[a("el-card",{attrs:{shadow:"hover","body-style":{padding:"0px"}}},[a("div",{staticClass:"grid-content grid-con-2"},[a("i",{staticClass:"el-icon-success grid-con-icon"}),a("div",{staticClass:"grid-cont-right"},[a("div",{staticClass:"grid-num"},[t._v(t._s(t.sumInfo.curedCount))]),a("div",[t._v("治愈人数")])])])])],1),a("el-col",{attrs:{span:8}},[a("el-card",{attrs:{shadow:"hover","body-style":{padding:"0px"}}},[a("div",{staticClass:"grid-content grid-con-3"},[a("i",{staticClass:"el-icon-error grid-con-icon"}),a("div",{staticClass:"grid-cont-right"},[a("div",{staticClass:"grid-num"},[t._v(t._s(t.sumInfo.deadCount))]),a("div",[t._v("死亡人数")])])])])],1)],1),a("el-card",{staticStyle:{height:"403px"},attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("待办事项")]),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"}},[t._v("添加")])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{"show-header":!1,data:t.todoList}},[a("el-table-column",{attrs:{width:"40"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-checkbox",{model:{value:e.row.status,callback:function(s){t.$set(e.row,"status",s)},expression:"scope.row.status"}})]}}])}),a("el-table-column",{scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"todo-item",class:{"todo-item-del":e.row.status}},[t._v(t._s(e.row.title)+"\n                            ")])]}}])}),a("el-table-column",{attrs:{width:"60"}},[[a("i",{staticClass:"el-icon-edit"}),a("i",{staticClass:"el-icon-delete"})]],2)],1)],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-card",{attrs:{shadow:"hover"}},[a("schart",{ref:"bar",staticClass:"schart",attrs:{canvasId:"bar",options:t.options}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-card",{attrs:{shadow:"hover"}},[a("schart",{ref:"line",staticClass:"schart",attrs:{canvasId:"line",options:t.options2}})],1)],1)],1)],1)},n=[],o=(s("6d57"),s("a311")),r=(s("7ed4"),s("425e")),i={name:"dashboard",data:function(){return{name:"",todoList:[],data:[],options:{type:"bar",title:{text:"各个省份的确诊人数统计"},xRorate:0,legend:{display:!1},labels:[],datasets:[]},options2:{type:"line",title:{text:"全国确诊人数统计"},labels:[],datasets:[]},userInfo:{},sumInfo:{},query:{no1:{},no2:{},no3:{},no4:{}}}},components:{Schart:o["a"]},computed:{role:function(){return"admin"===this.userInfo.userName?"超级管理员":"普通用户"}},created:function(){var t=this,e=localStorage.getItem("nCoV-token"),s=localStorage.getItem("nCoV-uid");r["a"].setTokenInHeaders(e),r["a"].fetchPost("/admin/getUserInfo",{id:s}).then((function(e){e.userInfo.lastLoginTime=new Date(e.userInfo.lastLoginTime).toLocaleTimeString(),t.userInfo=e.userInfo})),r["a"].fetchGet("/api").then((function(e){t.sumInfo=e.sumInfo;var s=[],a=[];e.provinceInfo.forEach((function(t){s.push(t.provinceShortName),a.push(t.confirmedCount)}));for(var n=0;n<4;n++)console.log(a[n]),console.log(a[n]/t.sumInfo.confirmedCount),t.query["no".concat(n+1)]={name:s[n],count:parseFloat((parseInt(a[n])/parseInt(t.sumInfo.confirmedCount)*100).toFixed(1))};t.options.labels=s,t.options.datasets.push({data:a})})),r["a"].fetchGet("/api/sum").then((function(e){for(var s=[],a=[],n=0;n<10;n++){var o="".concat(new Date(e[n].addtime).getHours(),":").concat(new Date(e[n].addtime).getMinutes()<10?"0".concat(new Date(e[n].addtime).getMinutes()):new Date(e[n].addtime).getMinutes());s.push(o);var r=e[n].confirmedCount;a.push(r)}t.options2.labels=s.reverse(),t.options2.datasets.push({labels:"全国确诊人数",data:a.reverse()})}))},methods:{changeDate:function(){var t=(new Date).getTime();this.data.forEach((function(e,s){var a=new Date(t-864e5*(6-s));e.name="".concat(a.getFullYear(),"/").concat(a.getMonth()+1,"/").concat(a.getDate())}))}}},c=i,l=(s("9ede"),s("5511")),d=Object(l["a"])(c,a,n,!1,null,"258481ba",null);e["default"]=d.exports}}]);